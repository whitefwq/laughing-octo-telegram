<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>自我防御协议●2025</title>
    <style>
        :root {
            --terminal-green: #00ff00;
            --alert-red: #ff0033;
        }

        body {
            background: #000;
            color: var(--terminal-green);
            font-family: 'Courier New', monospace;
            margin: 0;
            padding: 10px;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--alert-red);
            margin-right: 8px;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { opacity: 0.3; }
            50% { opacity: 1; }
            100% { opacity: 0.3; }
        }

        .console-output {
            border: 1px solid #333;
            padding: 15px;
            margin: 20px 0;
            min-height: 200px;
            overflow-y: hidden;
        }

        .console-line {
            margin: 5px 0;
            opacity: 0;
            animation: fadeIn 0.3s forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        input {
            background: #001100;
            border: 1px solid var(--terminal-green);
            color: var(--terminal-green);
            padding: 12px;
            width: 100%;
            margin: 10px 0;
            transition: all 0.3s;
        }

        input:focus {
            outline: none;
            box-shadow: 0 0 8px var(--terminal-green);
        }

        .warning {
            color: var(--alert-red);
            text-align: center;
            margin: 20px 0;
        }

        .system-locked {
            filter: brightness(0.7);
            pointer-events: none;
        }

        .launch-interface {
            display: none;
            text-align: center;
        }

        .launch-button {
            background: #002200;
            border: 2px solid var(--terminal-green);
            color: var(--terminal-green);
            padding: 15px 30px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s;
            margin: 20px 0;
        }

        .launch-button:hover {
            background: #004400;
            box-shadow: 0 0 15px var(--terminal-green);
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="warning" id="warningHeader">
            <div class="status-indicator"></div>
            <h2>防御协议系统 V2.2</h2>
            <p>⚠️ 禁止随便使用 ⚠️</p>
        </div>
        
        <div class="console-output" id="console"></div>

        <div id="inputInterface">
            <input type="password" id="inputField" 
                   placeholder="输入验证码 (8位)" 
                   maxlength="8">
        </div>

        <div class="launch-interface" id="launchInterface">
            <button class="launch-button" id="launchBtn">启动战略防御系统</button>
            <p>授权级别：Ω级</p>
            <p>验证状态：<span style="color:#0f0">已确认</span></p>
        </div>
    </div>

    <script>
        class SimulationApp {
            constructor() {
                this.attempts = 0;
                this.maxAttempts = 2;
                this.console = document.getElementById('console');
                this.inputField = document.getElementById('inputField');
                this.container = document.querySelector('.container');
                this.warningHeader = document.getElementById('warningHeader');
                this.inputInterface = document.getElementById('inputInterface');
                this.launchInterface = document.getElementById('launchInterface');
                this.launchBtn = document.getElementById('launchBtn');
                this.initEventListeners();
                this.bootSequence();
            }

            initEventListeners() {
                this.inputField.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        this.handleValidation();
                    }
                });
            }

            bootSequence() {
                this.print('<span class="console-line">初始化安全协议...</span>');
                this.delayedPrint('正在验证国际安全证书...', 1000);
                this.delayedPrint('连接指挥网络...', 2000);
                this.delayedPrint('当前状态: <span style="color:#ff0">DEFCON 5</span>', 3000);
            }

            print(text) {
                const div = document.createElement('div');
                div.className = 'console-line';
                div.innerHTML = text;
                this.console.appendChild(div);
                this.console.scrollTop = this.console.scrollHeight;
            }

            delayedPrint(text, delay) {
                setTimeout(() => this.print(text), delay);
            }

            async simulateProtocolFailure() {
                this.print('<span style="color:#f00">检测到未授权访问!</span>');
                await this.typeEffect('启动应急协议...');
                this.print('通知国际核武监督组织');
                this.print('擦除系统日志...');
                this.inputField.disabled = true;
                this.inputField.placeholder = '系统已锁定 (刷新页面重启)';
                this.container.classList.add('system-locked');
            }

            async typeEffect(text) {
                const element = document.createElement('div');
                element.className = 'console-line';
                this.console.appendChild(element);
                
                for (let i = 0; i < text.length; i++) {
                    await new Promise(resolve => setTimeout(resolve, 30));
                    element.innerHTML = text.substring(0, i+1);
                }
            }

            handleValidation() {
                const input = this.inputField.value;
                if (!input || input.length !== 8) return;

                // 密码验证逻辑
                if (input === '20251111') {
                    this.handleCorrectPassword();
                    return;
                }

                this.attempts++;
                const maskedInput = input.replace(/./g, '•');
                this.print(`验证代码: ${maskedInput}`);

                setTimeout(() => {
                    this.print('<span style="color:#f00">错误: 无效的模拟凭证</span>');
                    this.inputField.value = '';

                    if (this.attempts >= this.maxAttempts) {
                        this.simulateProtocolFailure();
                    } else {
                        this.print(`剩余尝试次数: ${this.maxAttempts - this.attempts}`);
                    }
                }, 800);
            }

            handleCorrectPassword() {
                this.print('<span style="color:#0f0">访问凭证验证通过!</span>');
                this.delayedPrint('加载安全协议...', 500);
                this.delayedPrint('解密战略防御系统...', 1000);
                
                setTimeout(() => {
                    this.warningHeader.classList.add('hidden');
                    this.inputInterface.classList.add('hidden');
                    this.launchInterface.style.display = 'block';
                    this.launchBtn.addEventListener('click', () => this.initiateLaunchSequence());
                }, 1500);
            }

            initiateLaunchSequence() {
                this.launchInterface.innerHTML = '';
                this.print('<span style="color:#0ff">启动战略防御协议...</span>');
                this.delayedPrint('激活指挥链路...', 500);
                this.delayedPrint('核弹发射井状态：<span style="color:#0f0">在线</span>', 1000);
                this.delayedPrint('卫星定位系统：<span style="color:#0f0">已同步</span>', 1500);
                this.delayedPrint('最后确认：<span style="color:#ff0">所有系统已同步</span>', 2000);
            }
        }

        // 初始化应用
        new SimulationApp();
    </script>
</body>
</html>
